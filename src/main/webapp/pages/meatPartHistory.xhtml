<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
        <p:panelGrid columns="2">
            <p:outputLabel value="Дата начала:" for="beginDate"/>
            <p:calendar id="beginDateP" value="#{goodsHistoryService.begin}" readonlyInput="true"/>
            <p:outputLabel value="Дата окончания:" for="endDate"/>
            <p:calendar id="endDateP" value="#{goodsHistoryService.end}" readonlyInput="true"/>
        </p:panelGrid>
        <p:commandButton value="Найти"
                             update="historyTableP"
                             action="#{goodsHistoryService.searchGoods()}"
                             process="historyTabP"/>
        <h:panelGrid columns="3" style="margin:10px 0">
        	<p:outputLabel for="template" value="Доступные колонки: id,category,type,weight,price,sender,company_name,date." />
        </h:panelGrid>                  
        <h:panelGrid columns="3" style="margin:10px 0">
        	<p:outputLabel for="template" value="Шаблон:" style="font-weight:bold"/>
        	<p:inputText id="template" value="#{dtColumnsView.columnTemplate}" size="50"/>
        	<p:commandButton update="historyTableP" 
                                 actionListener="#{dtColumnsView.updateColumns}" 
                                 value="Изменить" 
                                 process="@parent" 
                                 icon="ui-icon-refresh" 
                                 oncomplete="PF('goodsTable').clearFilters()"
                                 ajax="false"/>
    	</h:panelGrid>                     
                             
        <p:dataTable id="historyTableP" value="#{goodsHistoryService.listGoods}" var="goods" widgetVar="goodsTable" filteredValue="#{goodsHistoryService.filteredGoods}">
 <!--  
                <p:column headerText="Id">
                    <h:outputText value="#{goods.id}"/>
                </p:column>
                 <p:column headerText="Категория">
                    <h:outputText value="#{goods.category}"/>
                </p:column>
                 <p:column headerText="Тип">
                    <h:outputText value="#{goods.type}"/>
                </p:column>
                <p:column headerText="Вес">
                    <h:outputText value="#{goods.weight}"/>
                </p:column>
                <p:column headerText="Цена">
                    <h:outputText value="#{goods.price}"/>
                </p:column>
                <p:column headerText="Отправитель">
                    <h:outputText value="#{goods.sender}"/>
                </p:column>
                <p:column headerText="Получатель">
                    <h:outputText value="#{goods.company_name}"/>
                </p:column>
                <p:column headerText="Дата">
                    <h:outputText value="#{goods.date}">
                        <f:convertDateTime pattern="dd.MM.yyyy"/>
                    </h:outputText>
                </p:column> 		
-->									
			<p:columns value="#{dtColumnsView.columns}" 
                                   var="column" 
                                   columnIndexVar="colIndex" 
                                   sortBy="#{goods[column.property]}" 
                                   filterBy="#{goods[column.property]}">
            	<f:facet name="header">
                	<h:outputText value="#{column.header}" />
            	</f:facet>
            	<h:outputText value="#{goods[column.property]}" >
     <!--         		<f:convertDateTime type="both" pattern="dd.MM.yyyy"/>     -->
            	</h:outputText>
        	</p:columns>
	
         </p:dataTable>
            
            <p:commandButton value="Обновить" update="historyTableP">
            </p:commandButton>
</ui:composition>
