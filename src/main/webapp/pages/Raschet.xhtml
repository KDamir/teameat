<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

<f:view>
	<h:head></h:head>
	
	<h:body>
		<h:form id="fragmentForm">
			<div id="info"><span style="font-weight: bolder;">Информация по туше:</span>
				<h:inputText role="textbox" styleClass="infoName" value="#{userLoginView.username}" />
			</div>
			<h:panelGrid columns="8" id="mainPanel">
				<h:outputText value="Наименование" />
				<h:outputText value="Вес позиции" />
				<h:outputText value="Продажная цена" />
				<h:outputText value="Вес части туши" />
				<h:outputText value="Цена за кг" />
				<h:outputText value="% от общего веса" />
				<h:outputText value="Сумма продаж" />
                <h:inputHidden/>
                <c:forEach items="#{meatService.inputList}" var="orderPart">
                    <p:inputText value="#{orderPart.name}"/>
                    <p:inputText value="#{orderPart.weight}" styleClass="cellDouble"/>
                    <p:inputText value="#{orderPart.prod_cena }" styleClass="cellDouble"/>
                    <p:inputText value="#{orderPart.ves_chasti}" styleClass="cellDouble"/>
                    <p:inputText value="#{orderPart.cena_za_kg}" styleClass="cellDouble"/>
                    <h:outputText value="#{orderPart.proc_ot_vesa}" id="proc_ves">
                    	<f:convertNumber pattern="#0.00"/>
                    </h:outputText>
                    <h:outputText value="#{orderPart.suma_prodaj}" id="suma_prodaj" />
                    <p:commandButton value="Сохранить" update="fragmentForm" actionListener="#{meatService.updateOrder(orderPart)}"/>
                </c:forEach>
                <h:outputText value="Итого:" />
				<h:outputText value="#{meatService.calcWeight()}" />
				<h:inputHidden/>
				<h:inputHidden/>
				<h:inputHidden/>
				<h:outputText value="#{meatService.calcProc()}">
					<f:convertNumber pattern="#0.00"/>
				</h:outputText>
				<h:outputText value="#{meatService.calcSum()}" />
                <f:facet name="footer">
                	<p:commandButton value="Готово"/>
                	<p:commandButton value="Расчитать" update="fragmentForm" actionListener="#{meatService.calculate}"/>
                </f:facet>
			</h:panelGrid>
			
		</h:form>
	</h:body>
	
</f:view>
</ui:composition>