<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"
             xmlns:f="http://java.sun.com/jsf/core"
             xmlns:p="http://primefaces.org/ui"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             id="adminFormFragment">
    <p:panelGrid id="outerPanel" columns="1">
        <p:outputLabel value="Добавить поставщика"/>
        <p:panelGrid id="addSupplier" columns="4">
            <p:outputLabel value="Наименование:" for="companyName" style="text-align: center"/>
            <p:outputLabel value="Адрес:" for="address" style="text-align: center"/>
            <p:outputLabel value="Телефон:" for="phoneNumber" style="text-align: center"/>
            <p:outputLabel value="Примечание:" for="note" style="text-align: center"/>
            <p:inputText id="companyName"
                         value="#{adminFormController.supplier.companyName}"
                         immediate="true"/>
            <p:inputText id="address"
                         value="#{adminFormController.supplier.address}">
            </p:inputText>
            <p:inputText id="phoneNumber"
                         value="#{adminFormController.supplier.phoneNumber}"/>
            <p:inputText id="note" value="#{adminFormController.supplier.note}"/>
            <p:message for="companyName" display="icon"/>
            <p:message for="address" display="icon"/>
            <p:message for="phoneNumber" display="icon"/>
            <p:commandButton value="Добавить" actionListener="adminFormController.addSupplier" update="addSupplier"/>
        </p:panelGrid>
        <br/>
        <p:panelGrid id="bottomPanel" columns="2">
            <p:outputLabel value="Добавить категорию" style="text-align: center"/>
            <p:outputLabel value="Добавить тип" style="text-align: center"/>
            <p:panelGrid id="addCategoryPanel" columns="2">
                <p:dataList id="categoryList" value="#{adminFormController.categories}" var="category" type="ordered">
                    <f:facet name="header">
                        Существующие
                    </f:facet>
                    #{category.name}
                </p:dataList>
                <p:panelGrid id="newCategory" columns="1">
                    <p:outputLabel value="Наименование:" for="categoryName"/>
                    <p:inputText id="categoryName" value="#{adminFormController.category.name}" immediate="true"/>
                    <p:message for="categoryName" display="icon"/>
                    <p:commandButton value="Добавить" actionListener="adminFormController.addCategory" update="addCategoryPanel"/>
                </p:panelGrid>
            </p:panelGrid>
            <p:panelGrid id="addTypePanel" columns="2">
                <p:outputLabel value="Категория:" for="categoryComboBox"/>
                <p:selectOneMenu id="categoryComboBox" value="#{adminFormController.selectedCategory}" immediate="true">
                    <f:selectItems value="#{calculationController.categories}" var="category" itemLabel="#{category.name}" itemValue="#{category}"/>
                    <p:ajax event="change" update="typeList" listener="#{adminFormController.resetType}"/>
                </p:selectOneMenu>
                <p:dataList id="typeList" value="#{adminFormController.selectedCategoryTypes}" var="type" type="ordered">
                    <f:facet name="header">
                        Существующие
                    </f:facet>
                    #{type.name}
                </p:dataList>
                <p:panelGrid id="newType" columns="1">
                    <p:outputLabel value="Наименование:" for="typeName"/>
                    <p:inputText id="typeName" value="#{adminFormController.type.name}" immediate="true"/>
                    <p:message for="typeName" display="icon"/>
                    <p:commandButton value="Добавить" actionListener="adminFormController.addType" update="addTypePanel"/>
                </p:panelGrid>
            </p:panelGrid>
        </p:panelGrid>
    </p:panelGrid>
</ui:fragment>